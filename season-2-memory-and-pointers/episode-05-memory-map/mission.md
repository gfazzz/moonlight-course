# –ú–∏—Å—Å–∏—è: "–ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏"

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å `memory_mapper` ‚Äî —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–º–ø–æ–≤ –ø–∞–º—è—Ç–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- –§–∞–π–ª: `memory_dump.dat` (–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –†–∞–∑–º–µ—Ä: –¥–æ 4096 –±–∞–π—Ç
- –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –¥–∞–º–ø–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏**:
```
[TYPE] [SIZE] [DATA...] [CHECKSUM]
  1–±     1–±    SIZE –±–∞–π—Ç    1–±
```

**–¢–∏–ø—ã (TYPE)**:
- `0x01` ‚Äî STRING: —Ç–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ (–∏–º—è —Ñ–∞–π–ª–∞)
- `0x02` ‚Äî COORDINATES: –¥–≤–∞ float (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)
- `0x03` ‚Äî TIMESTAMP: uint32_t (UNIX timestamp)
- `0xFF` ‚Äî GARBAGE: –º—É—Å–æ—Ä–Ω—ã–µ –±–∞–π—Ç—ã (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å)

**–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ (CHECKSUM)**:
- XOR –≤—Å–µ—Ö –±–∞–π—Ç –≤ –ø–æ–ª–µ DATA
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ (stdout):
```
=== MEMORY MAP ===
[0x0000] GARBAGE (N bytes)
[0xXXXX] STRING (N bytes): "filename.txt"
[0xXXXX] COORDINATES (8 bytes): LAT¬∞ N/S, LON¬∞ E/W
[0xXXXX] TIMESTAMP (4 bytes): YYYY-MM-DD HH:MM:SS UTC
...

Total structures found: X
Total garbage bytes: Y
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

1. **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**:
   - –û—Ç–∫—Ä—ã—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤ –±—É—Ñ–µ—Ä (uint8_t array)
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/—á—Ç–µ–Ω–∏—è

2. **–ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä**:
   - –ü—Ä–æ–π—Ç–∏ –ø–æ –±—É—Ñ–µ—Ä—É –±–∞–π—Ç –∑–∞ –±–∞–π—Ç–æ–º
   - –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–∏–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –ò–∑–≤–ª–µ—á—å —Ä–∞–∑–º–µ—Ä –∏ –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å checksum

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**:
   - **STRING**: –≤—ã–≤–µ—Å—Ç–∏ –∫–∞–∫ —Ç–µ–∫—Å—Ç (—Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–µ–ø–µ—á–∞—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)
   - **COORDINATES**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –±–∞–π—Ç—ã –≤ –¥–≤–∞ float, –≤—ã–≤–µ—Å—Ç–∏ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö
   - **TIMESTAMP**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å uint32_t –≤ –¥–∞—Ç—É/–≤—Ä–µ–º—è UTC
   - **GARBAGE**: –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å, –Ω–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

4. **–í—ã–≤–æ–¥ –∫–∞—Ä—Ç—ã**:
   - –ê–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ hex (0xXXXX)
   - –¢–∏–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
   - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ checksum –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –≤—ã–≤–µ—Å—Ç–∏ `[CORRUPTED]`
- –ï—Å–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
- –ï—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø (–Ω–µ 0x01/0x02/0x03/0xFF) ‚Äî —Å—á–∏—Ç–∞—Ç—å garbage

### –ü—Ä–∏–º–µ—Ä—ã

**–í—Ö–æ–¥–Ω–æ–π –¥–∞–º–ø** (hex):
```
FF FF                           // 2 –±–∞–π—Ç–∞ garbage
01 05 48 65 6C 6C 6F 48         // STRING "Hello" (checksum=0x48)
02 08 [4 –±–∞–π—Ç–∞ float1] [4 –±–∞–π—Ç–∞ float2] CS
03 04 [4 –±–∞–π—Ç–∞ timestamp] CS
```

**–í—ã–≤–æ–¥**:
```
=== MEMORY MAP ===
[0x0000] GARBAGE (2 bytes)
[0x0002] STRING (5 bytes): "Hello"
[0x000A] COORDINATES (8 bytes): 55.7558¬∞ N, 37.6173¬∞ E
[0x0014] TIMESTAMP (4 bytes): 2024-03-15 18:30:00 UTC

Total structures found: 3
Total garbage bytes: 2
```

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```c
// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ XOR checksum
uint8_t calculate_checksum(uint8_t *data, int size);

// –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
void parse_string(uint8_t *data, int size);
void parse_coordinates(uint8_t *data, int size);
void parse_timestamp(uint8_t *data, int size);

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
void format_timestamp(uint32_t timestamp, char *buffer);
const char* type_to_string(uint8_t type);
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ main()

```c
int main(int argc, char *argv[]) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    // 2. –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
    // 3. –ß—Ç–µ–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä
    // 4. –ü–∞—Ä—Å–∏–Ω–≥ –≤ —Ü–∏–∫–ª–µ:
    //    - –ü—Ä–æ—á–∏—Ç–∞—Ç—å TYPE
    //    - –ï—Å–ª–∏ GARBAGE ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –±–∞–π—Ç
    //    - –ò–Ω–∞—á–µ: –ø—Ä–æ—á–∏—Ç–∞—Ç—å SIZE, DATA, CHECKSUM
    //    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å checksum
    //    - –í—ã–∑–≤–∞—Ç—å parse_* –¥–ª—è —Ç–∏–ø–∞
    // 5. –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    // 6. –ó–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
    return 0;
}
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- [ ] –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è
- [ ] Checksum –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] GARBAGE-–±–∞–π—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- [ ] –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≥—Ä–∞–¥—É—Å–æ–≤ —Å N/S/E/W
- [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ UTC
- [ ] –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] `make test` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

---

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏

<details>
<summary>–ö–∞–∫ —á–∏—Ç–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª?</summary>

```c
FILE *f = fopen(filename, "rb");  // "rb" = read binary
if (!f) {
    perror("fopen");
    return 1;
}

uint8_t buffer[MAX_SIZE];
size_t bytes_read = fread(buffer, 1, MAX_SIZE, f);
fclose(f);
```
</details>

<details>
<summary>–ö–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å 4 –±–∞–π—Ç–∞ –≤ float?</summary>

```c
float value;
memcpy(&value, &buffer[offset], sizeof(float));
// –¢–µ–ø–µ—Ä—å value —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∏—Å–ª–æ
```
</details>

<details>
<summary>–ö–∞–∫ –≤—ã—á–∏—Å–ª–∏—Ç—å XOR checksum?</summary>

```c
uint8_t checksum = 0;
for (int i = 0; i < size; i++) {
    checksum ^= data[i];
}
return checksum;
```
</details>

<details>
<summary>–ö–∞–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å timestamp –≤ –¥–∞—Ç—É?</summary>

```c
#include <time.h>

uint32_t ts = ...; // –∏–∑ —Ñ–∞–π–ª–∞
time_t t = (time_t)ts;
struct tm *tm_info = gmtime(&t);
char buffer[64];
strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S UTC", tm_info);
printf("%s\n", buffer);
```
</details>

---

**–£–¥–∞—á–∏, –∞–≥–µ–Ω—Ç!** üïµÔ∏è‚Äç‚ôÇÔ∏è
