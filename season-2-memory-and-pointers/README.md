# Season 2: Memory & Pointers

> *"Memory is the ultimate battlefield. Every byte tells a story, every pointer hides a clue."*

```
╔══════════════════════════════════════════════════════════╗
║                 OPERATION MOONLIGHT                      ║
║                    SEASON 2 / 10                         ║
║                                                          ║
║  СТАТУС:  🟡 В ПРОЦЕССЕ                                  ║
║  ТЕМА:    Memory & Pointers                             ║
║  УРОВЕНЬ: Intermediate                                 ║
╚══════════════════════════════════════════════════════════╝
```

---

## 🎯 Цель сезона

Освоить работу с памятью на уровне **мастера** — от простых массивов до виртуозного управления динамической памятью.

**После прохождения Season 2 вы сможете:**

- ✅ Эффективно работать с массивами и строками
- ✅ Понимать указатели на уровне машинного кода
- ✅ Управлять динамической памятью (malloc/free/realloc)
- ✅ Находить и устранять утечки памяти
- ✅ Оптимизировать использование памяти
- ✅ Работать с valgrind/leaks для профилирования

---

## 📖 Сюжет

После расшифровки первого сообщения и получения доступа к серверу № 1723, V. обнаружили новую проблему: **данные хранятся в зашифрованных файлах с особой структурой памяти**.

Чтобы продолжить расследование, нужно научиться работать с памятью на **низком уровне** — только так можно извлечь скрытую информацию.

**Временная линия Season 2:**
```
08:47  🗺️ Найден дамп памяти (memory_dump.dat)
13:45  🎯 Пройдена цепочка указателей
19:30  💾 Критическая ситуация: файл больше 4KB
02:47  🔥 Утечка памяти: система на грани краха
04:15  ✅ Season 2 завершён! Все утечки устранены
```

Каждый эпизод приближает вас к разгадке: кто стоит за операцией MOONLIGHT и что они скрывают.

## 🎬 Эпизоды

### Episode 05: "Memory Map" 🗺️
**Тема**: Массивы и строки в C

Вы нашли файл с закодированными координатами. Данные хранятся в виде массива байтов, который нужно правильно интерпретировать.

**Навыки**:
- Объявление и инициализация массивов
- Многомерные массивы
- Строки как массивы символов
- Работа с `string.h` (strlen, strcpy, strcmp, strcat)
- Граничные условия и переполнения буфера

**Артефакт**: `memory_mapper` — программа для анализа структур данных в памяти

---

### Episode 06: "Pointer Game" 🎯
**Тема**: Указатели и адресация

V. оставил схему памяти с указателями на критически важные данные. Нужно научиться читать эту "карту памяти".

**Навыки**:
- Понятие указателя (pointer)
- Операторы `&` (адрес) и `*` (разыменование)
- Арифметика указателей
- Указатели и массивы
- Передача по указателю в функции
- Указатели на функции (введение)

**Артефакт**: `pointer_navigator` — утилита для навигации по структурам данных

---

### Episode 07: "Deep Dive" 💾
**Тема**: Динамическая память

Файлы операции MOONLIGHT имеют переменный размер. Статические массивы не подходят — нужна динамическая память.

**Навыки**:
- Куча (heap) vs стек (stack)
- Функции `malloc()`, `calloc()`, `realloc()`
- Освобождение памяти `free()`
- Проверка успешности выделения
- Паттерны работы с динамической памятью
- Двумерные динамические массивы

**Артефакт**: `dynamic_loader` — загрузчик файлов произвольного размера

---

### Episode 08: "Fragmentation" 🔍
**Тема**: Утечки памяти и оптимизация

Программа начала "течь" — память не освобождается. Найдите утечки и оптимизируйте использование памяти.

**Навыки**:
- Поиск утечек памяти
- Использование valgrind
- Профилирование памяти
- Оптимизация выделения/освобождения
- Memory pools (пулы памяти)
- Best practices работы с памятью

**Артефакт**: `memory_guardian` — система контроля утечек памяти

---

## 🛠️ Инструменты

Для прохождения Season 2 понадобятся:

```bash
# Базовые инструменты (у вас уже есть)
gcc --version
make --version

# Для Episode 08: проверка утечек памяти
# macOS: используйте встроенную утилиту leaks (уже установлена!)
leaks --atExit -- ./program

# Linux: установите valgrind
sudo apt-get install valgrind
```

> **Рекомендация для macOS**: Используйте встроенную утилиту `leaks` — она работает на всех версиях, включая Apple Silicon. Valgrind на macOS может не работать или работать нестабильно.

## 🎓 Последовательность прохождения

1. **Episode 05** → основы массивов и строк
2. **Episode 06** → указатели (требует Episode 05)
3. **Episode 07** → динамическая память (требует Episode 06)
4. **Episode 08** → продвинутые техники (требует Episode 07)

Каждый эпизод строится на предыдущем. Рекомендуется проходить последовательно.

## 📊 Прогресс

```
╔══════════════════════════════════════════════════════════╗
║  SEASON 2 PROGRESS                                       ║
╠══════════════════════════════════════════════════════════╣
║                                                          ║
║  [ ] Episode 05: Memory Map              (1.0ч)  🟡    ║
║  [ ] Episode 06: Pointer Game            (1.25ч) 🟡    ║
║  [ ] Episode 07: Deep Dive               (1.5ч)  🔴    ║
║  [ ] Episode 08: Fragmentation (Финал)  (2.0ч)  🔴🔴  ║
║                                                          ║
║  Всего: ~6 часов                                         ║
║                                                          ║
╚══════════════════════════════════════════════════════════╝
```

### 🏆 Достижения Season 2:
- [ ] 🗺️ **Memory Cartographer** — построили карту памяти
- [ ] 🎯 **Pointer Master** — освоили указатели
- [ ] 💾 **Heap Master** — освоили динамическую память
- [ ] 🔍 **Memory Guardian** — нашли и устранили утечки
- [ ] 🎯 **Season 2 Complete** — эксперт по памяти!

## 🎨 Easter Eggs Season 2

🔍 **Скрытые детали:**
- Адрес 0x600000000000 — типичная область heap в 64-bit системах
- Linked list в Episode 06 — фундаментальная структура данных CS
- Утечка памяти +100MB/час — реальный паттерн из production bugs
- Valgrind и leaks — индустриальные инструменты

🎬 **Отсылки:**
- "Карта памяти" — как в фильме "The Matrix" (memory residuals)
- Цепочка указателей — как в "Inception" (следуй за нитью)
- Поиск утечек — навык из NASA/SpaceX разработки
- Финальный экзамен — как в "The Imitation Game"

---

## 🎬 Что дальше?

После завершения Season 2:

### 🌐 Season 3: Networks
**Сюжет:** V. отправляет сообщение: "До встречи в сети, агент"  
**Навыки:** Сокеты, TCP/IP, перехват пакетов, шифрованные коммуникации

---

## 🔗 Навигация

- [← Season 1: Foundations](../season-1-foundations/README.md)
- [→ Season 3: Networks](../season-3-networks/README.md)
- [📋 Общий план курса](../CURRICULUM.md)
- [🏠 Главная страница](../README.md)

---

> *"In memory we trust. Every allocation has a purpose, every free has a meaning."* — V.

```
// SEASON 2: MEMORY MASTERED
// READY FOR NETWORK INFILTRATION
// OPERATION MOONLIGHT CONTINUES
```
