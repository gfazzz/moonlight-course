# Episode 25: "Processes & Daemons" üîß
## Season 7: System Programming | Episode 25/42

> *"–í —Ç–µ–Ω–∏ —Å–∏—Å—Ç–µ–º—ã –∂–∏–≤—É—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã. –ú—ã —Å—Ç–∞–Ω–µ–º –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö."*

---

## üìã Briefing

–§–∏–∑–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø –ø–æ–ª—É—á–µ–Ω. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ.

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å (daemon)
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (fork, exec)
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
4. PID —Ñ–∞–π–ª—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìö –¢–µ–æ—Ä–∏—è

### –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ Linux

```c
#include <unistd.h>
#include <sys/types.h>

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
pid_t pid = fork();
if (pid == 0) {
    // –î–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
    execl("/bin/ls", "ls", "-la", NULL);
} else if (pid > 0) {
    // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å
    wait(NULL);
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ Daemon

```c
void daemonize() {
    pid_t pid = fork();
    if (pid < 0) exit(1);
    if (pid > 0) exit(0);  // –†–æ–¥–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
    
    setsid();  // –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è
    chdir("/");  // –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
    
    close(STDIN_FILENO);
    close(STDOUT_FILENO);
    close(STDERR_FILENO);
}
```

---

## üõ† –ü—Ä–∞–∫—Ç–∏–∫–∞

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π daemon
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ SIGTERM, SIGHUP
3. PID —Ñ–∞–π–ª –≤ /var/run/
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ syslog

**–§–∞–π–ª—ã:**
- `moonlight_daemon.c`
- `process_manager.c`

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:**
```bash
make daemon
sudo ./moonlight_daemon start
```

---

**–°–ª–µ–¥—É—é—â–∏–π —ç–ø–∏–∑–æ–¥:** [Episode 26: Threads & Parallelism ‚Üí](../episode-26-threads-parallelism/)
