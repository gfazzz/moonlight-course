# Episode 10: "Socket Programming" ๐

> *"Every connection is a handshake. Master the protocol, control the channel."*

---

## ๐ฌ BRIEFING

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะะะะฆะะฏ: ะะฒะฐััะธัะฐ, ัะฐะนะพะฝ ะัะฑะฐั, ะะพัะบะฒะฐ                 โ
โ  ะะะะะฏ:   09:30, ััะตะดะฐ, 1 ะพะบััะฑัั                       โ
โ  ะกะขะะขะฃะก:  ๐ก SERVER CONNECTION REQUIRED                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

ะะพัะปะต ะฐะฝะฐะปะธะทะฐ `addresses.txt` ะฒั ะฝะฐัะปะธ **ะฟะตัะฒัะน ัะทะตะป**: `203.0.113.42:31337`.  
ะขะตะฟะตัั ะฝัะถะฝะพ **ะฟะพะดะบะปััะธัััั** ะบ ัะตัะฒะตัั V.

ะ 09:28 ะฟัะธัะพะดะธั ะธะฝััััะบัะธั:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FROM: V. (ENCRYPTED CHANNEL)               โ
โ  TIME: 09:28:14 UTC                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                             โ
โ  ะะดัะตั ะฝะฐะนะดะตะฝ. ะขะตะฟะตัั โ ะฟะพะดะบะปััะตะฝะธะต.        โ
โ                                             โ
โ  ะกะตัะฒะตั: 203.0.113.42:31337                 โ
โ  ะัะพัะพะบะพะป: TCP                              โ
โ  ะััะตะฝัะธัะธะบะฐัะธั: Challenge-Response         โ
โ                                             โ
โ  ะจะฐะณะธ:                                      โ
โ  1. ะะพะดะบะปััะธัััั ัะตัะตะท socket()             โ
โ  2. ะัะฟัะฐะฒะธัั ะบะพะผะฐะฝะดั: AUTH <key>           โ
โ  3. ะะพะปััะธัั challenge (ัะธัะปะพ)              โ
โ  4. ะัะฟัะฐะฒะธัั response (XOR ั ะบะปััะพะผ)       โ
โ  5. ะะพะปััะธัั ัะตะบัะตัะฝะพะต ัะพะพะฑัะตะฝะธะต            โ
โ                                             โ
โ  ะะปัั ะดะปั AUTH: MOONLIGHT2024               โ
โ                                             โ
โ  ะฃะดะฐัะธ.                                     โ
โ  โ V.                                       โ
โ                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะงัะพ ะฒั ะฟะพะฝะธะผะฐะตัะต:**
- ะัะถะฝะพ ะฝะฐะฟะธัะฐัั **TCP-ะบะปะธะตะฝั** ะฝะฐ C
- ะัะฟะพะปัะทะพะฒะฐัั **socket API**: `socket()`, `connect()`, `send()`, `recv()`
- ะะตะฐะปะธะทะพะฒะฐัั **challenge-response** ะฐััะตะฝัะธัะธะบะฐัะธั
- ะกะตัะฒะตั ะฟัะพะฒะตัะธั ะฒะฐั ะธ ะพัะฟัะฐะฒะธั ัะตะบัะตัะฝัะต ะดะฐะฝะฝัะต

ะญัะพ **ะฟะตัะฒะพะต ัะตะฐะปัะฝะพะต ัะตัะตะฒะพะต ัะพะตะดะธะฝะตะฝะธะต**. ะะพัะฐ ััะฐัั ะผะฐััะตัะพะผ ัะพะบะตัะพะฒ.

### ๐ฏ ะะะะะงะ

ะกะพะทะดะฐัั **`moonlight_client`** โ TCP-ะบะปะธะตะฝั ะดะปั ัะฒัะทะธ ั ัะตัะฒะตัะพะผ:
1. โ ะะพะดะบะปััะตะฝะธะต ะบ ัะตัะฒะตัั ะฟะพ TCP
2. โ ะัะฟัะฐะฒะบะฐ ะบะพะผะฐะฝะดั AUTH ั ะบะปััะพะผ
3. โ ะะพะปััะตะฝะธะต challenge ะพั ัะตัะฒะตัะฐ
4. โ ะััะธัะปะตะฝะธะต response (XOR challenge ั ะบะปััะพะผ)
5. โ ะะพะปััะตะฝะธะต ัะตะบัะตัะฝะพะณะพ ัะพะพะฑัะตะฝะธั
6. โ ะะพััะตะบัะฝะพะต ะทะฐะบัััะธะต ัะพะตะดะธะฝะตะฝะธั

**ะกะปะพะถะฝะพััั:** ๐ก Medium  
**ะะพะฒัะต ะฝะฐะฒัะบะธ:** Socket programming, TCP client, challenge-response protocol

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [!] ะะะะะะะะ:                               โ
โ  ะญัะพ ะฒะฐั ะฟะตัะฒัะน TCP-ะบะปะธะตะฝั.                  โ
โ  ะะฐะถะดัะน ะฒัะทะพะฒ socket API โ ัะฐะณ ะฒ ัะตัั.       โ
โ  ะัะธะฑะบะฐ = ัะฐะทััะฒ ัะพะตะดะธะฝะตะฝะธั.                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะขะตะพัะธั: ะกะพะบะตัั ะฒ C

### ๐ก ะะฐัะตะผ ััะพ ะฝัะถะฝะพ ะฒ ัะตะฐะปัะฝะพััะธ?

**ะกะพะบะตัั** โ ะพัะฝะพะฒะฐ ะฒัะตั ัะตัะตะฒัั ะฟัะธะปะพะถะตะฝะธะน:
- ๐ **ะะตะฑ**: ะฑัะฐัะทะตัั, ัะตัะฒะตัั (HTTP/HTTPS)
- ๐ง **Email**: SMTP, IMAP, POP3
- ๐ฌ **ะะตััะตะฝะดะถะตัั**: WhatsApp, Telegram
- ๐ฎ **ะะณัั**: ะผะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ะพะฝะปะฐะนะฝ-ะธะณัั
- ๐ **ะะตะทะพะฟะฐัะฝะพััั**: VPN, SSH, SSL/TLS

**ะะตะท ัะพะบะตัะพะฒ ะฝะตั ะธะฝัะตัะฝะตัะฐ.**

---

### 1. ะงัะพ ัะฐะบะพะต ัะพะบะตั?

**ะกะพะบะตั** โ ััะพ:
- **ะะพะฝะตัะฝะฐั ัะพัะบะฐ** ะดะปั ะพัะฟัะฐะฒะบะธ/ะฟะพะปััะตะฝะธั ะดะฐะฝะฝัั
- **ะคะฐะนะปะพะฒัะน ะดะตัะบัะธะฟัะพั** (ะบะฐะบ ัะฐะนะป, ะฝะพ ะดะปั ัะตัะธ)
- **ะะฑัััะฐะบัะธั** ะฝะฐะด TCP/IP

```c
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

// ะกะพะทะดะฐะฝะธะต ัะพะบะตัะฐ
int sockfd = socket(AF_INET, SOCK_STREAM, 0);  // TCP
// AF_INET   - IPv4
// SOCK_STREAM - TCP (ะฝะฐะดะตะถะฝัะน, ั ัััะฐะฝะพะฒะบะพะน ัะพะตะดะธะฝะตะฝะธั)
// 0 - ะฟัะพัะพะบะพะป ะฟะพ ัะผะพะปัะฐะฝะธั

// ะะปะธ UDP:
int udp_fd = socket(AF_INET, SOCK_DGRAM, 0);   // UDP
// SOCK_DGRAM - UDP (ะฝะตะฝะฐะดะตะถะฝัะน, ะฑะตะท ัะพะตะดะธะฝะตะฝะธั)
```

**ะะฝะฐะปะพะณะธั**: ะกะพะบะตั โ ััะพ "ัะตะปะตัะพะฝ". TCP โ ะทะฒะพะฝะพะบ (ั ัััะฐะฝะพะฒะบะพะน ัะฒัะทะธ). UDP โ SMS (ะพัะฟัะฐะฒะธะป ะธ ะทะฐะฑัะป).

---

### 2. ะกัััะบัััะฐ ะฐะดัะตัะฐ

```c
struct sockaddr_in {
    sa_family_t    sin_family;  // AF_INET (IPv4)
    in_port_t      sin_port;    // ะะพัั (network byte order!)
    struct in_addr sin_addr;    // IP ะฐะดัะตั
    char           sin_zero[8]; // Padding (ะพะฑะฝัะปะธัั!)
};

// ะัะธะผะตั ะทะฐะฟะพะปะฝะตะฝะธั:
struct sockaddr_in server_addr;
memset(&server_addr, 0, sizeof(server_addr));  // ะะฑะฝัะปะธัั!

server_addr.sin_family = AF_INET;
server_addr.sin_port = htons(31337);  // Host to Network Short
inet_pton(AF_INET, "203.0.113.42", &server_addr.sin_addr);
```

**ะะฐะถะฝะพ**: ะัะตะณะดะฐ ะธัะฟะพะปัะทัะนัะต `htons()` ะดะปั ะฟะพััะพะฒ! (Byte order!)

---

### 3. TCP ะะปะธะตะฝั (ะฟะพัะฐะณะพะฒะพ)

#### ะจะฐะณ 1: ะกะพะทะดะฐัั ัะพะบะตั

```c
int sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) {
    perror("socket failed");
    return 1;
}
```

#### ะจะฐะณ 2: ะะฐัััะพะธัั ะฐะดัะตั ัะตัะฒะตัะฐ

```c
struct sockaddr_in server_addr;
memset(&server_addr, 0, sizeof(server_addr));

server_addr.sin_family = AF_INET;
server_addr.sin_port = htons(31337);
inet_pton(AF_INET, "203.0.113.42", &server_addr.sin_addr);
```

#### ะจะฐะณ 3: ะะพะดะบะปััะธัััั

```c
if (connect(sockfd, (struct sockaddr*)&server_addr, sizeof(server_addr)) < 0) {
    perror("connect failed");
    close(sockfd);
    return 1;
}

printf("Connected to server!\n");
```

**ะะพะผะตะฝั connect()**: ะฟัะพะธััะพะดะธั **TCP handshake** (SYN, SYN-ACK, ACK).

#### ะจะฐะณ 4: ะัะฟัะฐะฒะธัั ะดะฐะฝะฝัะต

```c
char message[] = "AUTH MOONLIGHT2024\n";
ssize_t sent = send(sockfd, message, strlen(message), 0);
if (sent < 0) {
    perror("send failed");
}
```

**ะะฐะถะฝะพ**: `send()` ะฒะพะทะฒัะฐัะฐะตั ะบะพะปะธัะตััะฒะพ ะพัะฟัะฐะฒะปะตะฝะฝัั ะฑะฐะนัะพะฒ (ะผะพะถะตั ะฑััั ะผะตะฝััะต ะทะฐะฟัะพัะตะฝะฝะพะณะพ!).

#### ะจะฐะณ 5: ะะพะปััะธัั ะดะฐะฝะฝัะต

```c
char buffer[1024];
memset(buffer, 0, sizeof(buffer));

ssize_t received = recv(sockfd, buffer, sizeof(buffer) - 1, 0);
if (received < 0) {
    perror("recv failed");
} else if (received == 0) {
    printf("Server closed connection\n");
} else {
    printf("Received: %s\n", buffer);
}
```

**ะัะพะฑะตะฝะฝะพััะธ `recv()`**:
- ะะพะทะฒัะฐัะฐะตั 0 โ ัะตัะฒะตั ะทะฐะบััะป ัะพะตะดะธะฝะตะฝะธะต
- ะะพะทะฒัะฐัะฐะตั -1 โ ะพัะธะฑะบะฐ
- ะะพะทะฒัะฐัะฐะตั N > 0 โ ะฟะพะปััะตะฝะพ N ะฑะฐะนัะพะฒ

#### ะจะฐะณ 6: ะะฐะบัััั ัะพะบะตั

```c
close(sockfd);
```

**ะะฐะถะฝะพ**: ะัะตะณะดะฐ ะทะฐะบััะฒะฐะนัะต ัะพะบะตัั! (ะฃัะตัะบะฐ ะดะตัะบัะธะฟัะพัะพะฒ!)

---

### 4. TCP ะกะตัะฒะตั (ะดะปั ะฟะพะฝะธะผะฐะฝะธั)

```c
// 1. ะกะพะทะดะฐัั ัะพะบะตั
int server_fd = socket(AF_INET, SOCK_STREAM, 0);

// 2. ะะฟัะธะธ ัะพะบะตัะฐ (ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฐะดัะตัะฐ)
int opt = 1;
setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt));

// 3. ะัะธะฒัะทะฐัั ะบ ะฐะดัะตัั
struct sockaddr_in addr;
addr.sin_family = AF_INET;
addr.sin_port = htons(8080);
addr.sin_addr.s_addr = INADDR_ANY;  // ะัะฑะพะน ะธะฝัะตััะตะนั

bind(server_fd, (struct sockaddr*)&addr, sizeof(addr));

// 4. ะกะปััะฐัั
listen(server_fd, 5);  // Backlog = 5 (ะพัะตัะตะดั ะฟะพะดะบะปััะตะฝะธะน)

// 5. ะัะธะฝััั ะบะปะธะตะฝัะฐ
struct sockaddr_in client_addr;
socklen_t client_len = sizeof(client_addr);
int client_fd = accept(server_fd, (struct sockaddr*)&client_addr, &client_len);

// 6. ะะฑะผะตะฝ ะดะฐะฝะฝัะผะธ
char buffer[1024];
recv(client_fd, buffer, sizeof(buffer), 0);
send(client_fd, "Response", 8, 0);

// 7. ะะฐะบัััั
close(client_fd);
close(server_fd);
```

---

### 5. UDP (ะดะปั ััะฐะฒะฝะตะฝะธั)

```c
// ะะปะธะตะฝั UDP (ะฑะตะท connect!)
int sockfd = socket(AF_INET, SOCK_DGRAM, 0);

struct sockaddr_in server_addr;
// ... ะฝะฐัััะพะนะบะฐ ะฐะดัะตัะฐ ...

// ะัะฟัะฐะฒะธัั (ัะบะฐะทัะฒะฐะตะผ ะฐะดัะตั ะบะฐะถะดัะน ัะฐะท!)
sendto(sockfd, "Hello", 5, 0, 
       (struct sockaddr*)&server_addr, sizeof(server_addr));

// ะะพะปััะธัั
char buffer[1024];
socklen_t addr_len = sizeof(server_addr);
recvfrom(sockfd, buffer, sizeof(buffer), 0,
         (struct sockaddr*)&server_addr, &addr_len);

close(sockfd);
```

**ะะฐะทะฝะธัะฐ TCP vs UDP**:
- TCP: `connect()` โ `send()` / `recv()`
- UDP: `sendto()` / `recvfrom()` (ะฑะตะท connect)

---

### 6. ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

```c
// ะัะตะณะดะฐ ะฟัะพะฒะตััะนัะต ะฒะพะทะฒัะฐัะฐะตะผัะต ะทะฝะฐัะตะฝะธั!

if (socket(...) < 0) {
    perror("socket");  // ะัะฒะพะดะธั ัะธััะตะผะฝัั ะพัะธะฑะบั
    exit(1);
}

if (connect(...) < 0) {
    switch (errno) {
        case ECONNREFUSED:
            printf("Connection refused (server not running?)\n");
            break;
        case ETIMEDOUT:
            printf("Connection timeout\n");
            break;
        case ENETUNREACH:
            printf("Network unreachable\n");
            break;
        default:
            perror("connect");
    }
    exit(1);
}
```

---

### 7. ะะตะฑะปะพะบะธััััะธะต ัะพะบะตัั (advanced)

```c
#include <fcntl.h>

// ะกะดะตะปะฐัั ัะพะบะตั ะฝะตะฑะปะพะบะธััััะธะผ
int flags = fcntl(sockfd, F_GETFL, 0);
fcntl(sockfd, F_SETFL, flags | O_NONBLOCK);

// ะขะตะฟะตัั recv() ะฝะต ะฑะปะพะบะธััะตั!
ssize_t n = recv(sockfd, buffer, sizeof(buffer), 0);
if (n < 0 && errno == EWOULDBLOCK) {
    printf("No data available yet\n");
}
```

**ะะฐัะตะผ?** ะะปั ะพะดะฝะพะฒัะตะผะตะฝะฝะพะน ัะฐะฑะพัั ั ะฝะตัะบะพะปัะบะธะผะธ ัะพะบะตัะฐะผะธ (`select()`, `poll()`, `epoll()`).

---

## ๐ฏ ะะธััะธั: "MOONLIGHT Client"

### ะะตะณะตะฝะดะฐ

ะั ะฝะฐัะปะธ ะฐะดัะตั **203.0.113.42:31337**. ะขะตะฟะตัั ะฝัะถะฝะพ ะฟะพะดะบะปััะธัััั ะธ ะฟัะพะนัะธ ะฐััะตะฝัะธัะธะบะฐัะธั.

V. ะธัะฟะพะปัะทัะตั **challenge-response** ะฟัะพัะพะบะพะป:

```
Client โ Server: AUTH MOONLIGHT2024
Server โ Client: CHALLENGE 0x12345678
Client โ Server: RESPONSE 0xXXXXXXXX  (XOR challenge ั ัะตัะตะผ ะบะปััะฐ)
Server โ Client: ACCESS_GRANTED\nSECRET_MESSAGE
```

**ะะฐัะฐ ะทะฐะดะฐัะฐ**: ะฝะฐะฟะธัะฐัั ะบะปะธะตะฝั, ะบะพัะพััะน:
1. ะะพะดะบะปััะฐะตััั ะบ ัะตัะฒะตัั
2. ะัะฟัะฐะฒะปัะตั `AUTH <key>`
3. ะะพะปััะฐะตั challenge
4. ะััะธัะปัะตั response (XOR)
5. ะะพะปััะฐะตั ัะตะบัะตัะฝะพะต ัะพะพะฑัะตะฝะธะต

---

### ะคะพัะผะฐั ะฟัะพัะพะบะพะปะฐ

**1. ะััะตะฝัะธัะธะบะฐัะธั:**
```
Client โ "AUTH MOONLIGHT2024\n"
Server โ "CHALLENGE 305419896\n"  (ัะธัะปะพ ะฒ decimal)
```

**2. Response:**
```
Client โ "RESPONSE <calculated>\n"
```

**ะััะธัะปะตะฝะธะต response**:
```c
// ะัะตะฒะดะพะบะพะด:
uint32_t challenge = parse_from_server();
uint32_t key_hash = simple_hash("MOONLIGHT2024");  // ะัะพััะพะน ัะตั
uint32_t response = challenge ^ key_hash;
```

**ะัะพััะพะน ัะตั**:
```c
uint32_t simple_hash(const char *str) {
    uint32_t hash = 0;
    for (int i = 0; str[i]; i++) {
        hash = (hash * 31) + str[i];
    }
    return hash;
}
```

**3. ะะตะทัะปััะฐั:**
```
Server โ "ACCESS_GRANTED\n<secret_message>\n"
```

---

## ๐ ะกัััะบัััะฐ ัะฟะธะทะพะดะฐ

```
episode-10-socket-programming/
โโโ README.md              โ ะั ะทะดะตัั
โโโ mission.md
โโโ starter.c              โ ะจะฐะฑะปะพะฝ TCP ะบะปะธะตะฝัะฐ
โโโ artifacts/
โ   โโโ moonlight_client.c โ ะกะพะทะดะฐะนัะต ััะพั ัะฐะนะป
โโโ solution/
โ   โโโ moonlight_client_solution.c
โ   โโโ test_server.c      โ ะะพะบะฐะปัะฝัะน ัะตััะพะฒัะน ัะตัะฒะตั
โโโ tests/
    โโโ test.sh
```

### ๐ก ะะฐะบ ัะฐะฑะพัะฐัั:

1. **ะะทััะธัะต** `starter.c` โ ัะฐะผ ะฑะฐะทะพะฒัะน TCP ะบะปะธะตะฝั ั TODO
2. **ะกะพะทะดะฐะนัะต** ัะฐะนะป `artifacts/moonlight_client.c`
3. **ะะตะฐะปะธะทัะนัะต** challenge-response:
   - ะะพะดะบะปััะตะฝะธะต ัะตัะตะท `socket()` + `connect()`
   - ะัะฟัะฐะฒะบะฐ AUTH ั `send()`
   - ะะฐััะธะฝะณ challenge ะธะท `recv()`
   - ะััะธัะปะตะฝะธะต response (XOR)
   - ะะพะปััะตะฝะธะต ัะตะบัะตัะฝะพะณะพ ัะพะพะฑัะตะฝะธั
4. **ะกะบะพะผะฟะธะปะธััะนัะต**: `gcc -Wall -o moonlight_client artifacts/moonlight_client.c`
5. **ะะฐะฟัััะธัะต**: `./moonlight_client 203.0.113.42 31337`

> ๐ก **ะะปั ัะตััะธัะพะฒะฐะฝะธั**: ะธัะฟะพะปัะทัะนัะต `solution/test_server.c` ะปะพะบะฐะปัะฝะพ!

---

### ะะพะดัะบะฐะทะบะธ

<details>
<summary>ะะฐะบ ะฟะฐััะธัั "CHALLENGE 12345"?</summary>

```c
char buffer[1024];
recv(sockfd, buffer, sizeof(buffer), 0);

uint32_t challenge;
if (sscanf(buffer, "CHALLENGE %u", &challenge) == 1) {
    printf("Got challenge: 0x%08X\n", challenge);
}
```
</details>

<details>
<summary>ะะฐะบ ะฒััะธัะปะธัั response?</summary>

```c
uint32_t simple_hash(const char *str) {
    uint32_t hash = 0;
    for (int i = 0; str[i]; i++) {
        hash = (hash * 31) + str[i];
    }
    return hash;
}

uint32_t key_hash = simple_hash("MOONLIGHT2024");
uint32_t response = challenge ^ key_hash;
```
</details>

<details>
<summary>ะะฐะบ ะพัะฟัะฐะฒะธัั response?</summary>

```c
char response_msg[256];
snprintf(response_msg, sizeof(response_msg), "RESPONSE %u\n", response);
send(sockfd, response_msg, strlen(response_msg), 0);
```
</details>

---

## โ ะัะพะฒะตัะบะฐ

```bash
# ะะพะผะฟะธะปััะธั
gcc -Wall -o moonlight_client artifacts/moonlight_client.c

# ะขะตััะธัะพะฒะฐะฝะธะต (ะปะพะบะฐะปัะฝัะน ัะตัะฒะตั)
gcc -Wall -o test_server solution/test_server.c
./test_server &  # ะะฐะฟัััะธัั ะฒ ัะพะฝะต
./moonlight_client 127.0.0.1 31337

# ะััะฐะฝะพะฒะธัั ัะตัะฒะตั
pkill test_server
```

**ะัะธัะตัะธะธ ััะฟะตัะฐ**:
- ะะปะธะตะฝั ััะฟะตัะฝะพ ะฟะพะดะบะปััะฐะตััั
- ะัะฟัะฐะฒะปัะตั AUTH ะบะพััะตะบัะฝะพ
- ะะฐััะธั challenge
- ะััะธัะปัะตั ะฟัะฐะฒะธะปัะฝัะน response
- ะะพะปััะฐะตั ACCESS_GRANTED ะธ ัะตะบัะตัะฝะพะต ัะพะพะฑัะตะฝะธะต
- ะะพััะตะบัะฝะพ ะทะฐะบััะฒะฐะตั ัะพะตะดะธะฝะตะฝะธะต

---

## ๐ฌ DEBRIEFING

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะะะะฆะะฏ: ะะฒะฐััะธัะฐ, ัะฐะนะพะฝ ะัะฑะฐั, ะะพัะบะฒะฐ                 โ
โ  ะะะะะฏ:   14:42, ััะตะดะฐ, 1 ะพะบััะฑัั                       โ
โ  ะกะขะะขะฃะก:  ๐ข CONNECTION ESTABLISHED                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

`moonlight_client` ะทะฐะฟััะตะฝ. ะกะพะตะดะธะฝะตะฝะธะต ัััะฐะฝะพะฒะปะตะฝะพ. ะะตะทัะปััะฐั:

```
=== MOONLIGHT CLIENT ===
Connecting to 203.0.113.42:31337... โ
Sending AUTH... โ
Received challenge: 0x12345678
Calculating response... โ
Sending response... โ

Server response:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ACCESS_GRANTED                         โ
โ                                         โ
โ  ะขั ะฟะพะดะบะปััะธะปัั ะบ ะฟะตัะฒะพะผั ัะทะปั.         โ
โ  ะะพ ััะพ ัะพะปัะบะพ ะฝะฐัะฐะปะพ ัะตัะธ.             โ
โ                                         โ
โ  ะกะปะตะดัััะธะน ัะฐะณ:                         โ
โ  ะะะะะฅะะะข ะขะะะคะะะ                       โ
โ                                         โ
โ  Episode 11: Packet Analysis            โ
โ  ะะฐััะธัั ัะธัะฐัั ััะถะธะต ะฟะฐะบะตัั.           โ
โ                                         โ
โ  โ V.                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Connection closed gracefully.
```

**ะงัะพ ะฒั ัะทะฝะฐะปะธ:**
- **TCP handshake** ะฟัะพัะตะป ััะฟะตัะฝะพ (SYN โ SYN-ACK โ ACK)
- **Challenge-response** โ ะฟัะพััะฐั, ะฝะพ ัััะตะบัะธะฒะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
- **XOR ั ัะตัะตะผ** โ ะฑะฐะทะพะฒัะน ะผะตัะพะด ะทะฐัะธัั
- ะกะตัะฒะตั ะพัะฟัะฐะฒะธะป **ะบะพะพัะดะธะฝะฐัั ัะปะตะดัััะตะณะพ ัะทะปะฐ**

ะ 14:40 ะฝะพะฒะพะต ัะพะพะฑัะตะฝะธะต:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FROM: V.                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                         โ
โ  ะกะพะตะดะธะฝะตะฝะธะต โ ััะพ ัะพะปัะบะพ ะฝะฐัะฐะปะพ.        โ
โ  ะะฐััะพััะฐั ัะธะปะฐ โ ะฒ ะะะะะฅะะะขะ.          โ
โ                                         โ
โ  Episode 11: Packet Analysis            โ
โ  ะะดั ะฝะฐ ัะปะตะดัััะตะผ ััะพะฒะฝะต.               โ
โ                                         โ
โ  โ V.                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะพะดะบะปััะธัััั ะผะพะถะตั ะบะฐะถะดัะน. ะะพะฝะธะผะฐัั ััะฐัะธะบ โ ะตะดะธะฝะธัั.**

### ๐๏ธ ะะฐะฒัะบ ัะฐะทะฑะปะพะบะธัะพะฒะฐะฝ:
**"Socket Master"** โ ะั ะฒะปะฐะดะตะตัะต TCP/IP ะฝะฐ ััะพะฒะฝะต ะบะพะดะฐ. ะกะพะบะตัั ะฑะพะปััะต ะฝะต ัะฐะนะฝะฐ.

---

## ๐ฅ Easter Eggs

<details>
<summary>๐ ะัััะปะบะธ ะธ ัะตะบัะตัั</summary>

1. **Challenge-Response** โ ะบะปะฐััะธัะตัะบะธะน ะฟัะพัะพะบะพะป ะฐััะตะฝัะธัะธะบะฐัะธะธ (CHAP, HTTP Digest)
2. **Hash * 31** โ ะบะปะฐััะธัะตัะบะธะน ะฐะปะณะพัะธัะผ Java `String.hashCode()`
3. **Port 31337** โ ัะฝะพะฒะฐ leet speak (ัะถะต ะทะฝะฐะบะพะผะพ ะธะท Episode 09)
4. **XOR ะดะปั response** โ ัะฟัะพัะตะฝะฝัะน HMAC (ัะตะฐะปัะฝัะต ัะธััะตะผั ะธัะฟะพะปัะทััั SHA-256)
5. **TCP handshake (SYN-SYN/ACK-ACK)** โ ััะฝะดะฐะผะตะฝั ะฒัะตะณะพ TCP
6. **MOONLIGHT2024** โ ะบะปัั ัะพะดะตัะถะธั ะณะพะด, ะฝะฐะผะตะบ ะฝะฐ timeline ะพะฟะตัะฐัะธะธ
7. **V.'s timestamp 14:40** โ 0xE28 hex, ะพัััะปะบะฐ ะบ Enigma machine (E-28 variant)

**ะคะธะปะพัะพัะธั ัะฟะธะทะพะดะฐ**: *"ะกะพะบะตั โ ััะพ ะดะฒะตัั. ะัะพัะพะบะพะป โ ััะพ ะบะปัั. ะะฝะฐะฝะธะต โ ััะพ ะฒะปะฐััั."*

</details>

---

## ๐ ะะฐะฒะธะณะฐัะธั

- [โ Episode 09: Network Basics](../episode-09-network-basics/README.md)
- [โ Episode 11: Packet Analysis](../episode-11-packet-analysis/README.md)
- [๐ Season 3: Networks](../README.md)
- [๐ ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ](../../README.md)

---

> *"Master the socket, master the network. The rest is just data."* โ V.