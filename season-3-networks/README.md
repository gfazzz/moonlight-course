# Season 3: Networks

> *"Everything is connected. You just need to find the thread."*

## 🎯 Цель сезона

Освоить сетевое программирование на C — от основ TCP/IP до перехвата и анализа трафика. Вы научитесь:

- Понимать сетевые протоколы на низком уровне
- Создавать клиент-серверные приложения с сокетами
- Анализировать сетевой трафик (packet sniffing)
- Перехватывать и расшифровывать коммуникации
- Работать с raw sockets и протоколами

## 📖 Сюжет

След операции MOONLIGHT уходит в сеть. V. оставил зашифрованные сообщения в сетевом трафике. Чтобы их найти, вы должны стать мастером сетей:

- **Перехватить** подозрительные пакеты
- **Анализировать** скрытые каналы связи
- **Расшифровать** данные из TCP-потоков
- **Проникнуть** в защищённую сеть

Каждый эпизод приближает вас к серверу MOONLIGHT.

## 🎬 Эпизоды

### Episode 09: "Network Basics" 🌐
**Тема**: Основы сетей и TCP/IP

Вы нашли IP-адрес, но не знаете, как к нему подключиться. Время изучить, как работают сети на самом низком уровне.

**Навыки**:
- Модель OSI и TCP/IP stack
- IP-адресация, маски подсети
- Порты и протоколы (TCP, UDP, ICMP)
- Структуры сетевых пакетов
- Работа с `netinet/in.h`, `arpa/inet.h`
- Преобразование byte order (htons, ntohs)

**Артефакт**: `net_analyzer` — утилита для анализа IP-адресов и портов

---

### Episode 10: "Socket Programming" 🔌
**Тема**: Сокеты и клиент-сервер

V. запустил секретный сервер. Нужно написать клиент для подключения и обмена данными.

**Навыки**:
- Создание сокетов (`socket()`, `bind()`, `listen()`)
- TCP-клиент и сервер
- Функции `connect()`, `accept()`, `send()`, `recv()`
- UDP-коммуникация (`sendto()`, `recvfrom()`)
- Неблокирующие сокеты и `select()`
- Обработка ошибок подключения

**Артефакт**: `moonlight_client` — клиент для связи с сервером V.

---

### Episode 11: "Packet Analysis" 📡
**Тема**: Перехват и анализ трафика

Противник шифрует связь. Нужно перехватить пакеты и найти паттерны.

**Навыки**:
- Raw sockets (`SOCK_RAW`)
- Структуры IP, TCP, UDP заголовков
- Packet sniffing (чтение сырых пакетов)
- Парсинг Ethernet frames
- Фильтрация трафика по портам/адресам
- Hex dump пакетов

**Артефакт**: `packet_sniffer` — анализатор сетевого трафика

---

### Episode 12: "Encrypted Communications" 🔐
**Тема**: Перехват зашифрованных коммуникаций

Финальная миссия Season 3: перехватить зашифрованный канал между агентами противника и извлечь ключевую информацию.

**Навыки**:
- Захват TCP-потоков
- Реконструкция сессий из пакетов
- Анализ паттернов шифрования
- Поиск слабых мест в протоколах
- Timing attacks и side channels
- Интеграция с предыдущими эпизодами

**Артефакт**: `comm_interceptor` — система перехвата коммуникаций

---

## 🛠️ Инструменты

Для прохождения Season 3 понадобятся:

```bash
# Базовые инструменты (у вас уже есть)
gcc --version
make --version

# Сетевые утилиты (встроены)
ifconfig  # или ip addr (Linux)
netstat   # или ss (Linux)
tcpdump   # для проверки перехвата

# Опционально (для тестирования)
nc (netcat)  # для создания тестовых соединений
wireshark    # GUI для анализа (не обязательно)
```

> **Важно для macOS/Linux**: Некоторые операции требуют root-прав (sudo), особенно raw sockets.

## 🎓 Последовательность прохождения

1. **Episode 09** → основы TCP/IP и адресация
2. **Episode 10** → сокеты (требует Episode 09)
3. **Episode 11** → packet sniffing (требует Episodes 09-10)
4. **Episode 12** → финальная миссия (требует все предыдущие)

Каждый эпизод строится на предыдущем. Рекомендуется проходить последовательно.

## 📊 Прогресс

- [ ] Episode 09: Network Basics
- [ ] Episode 10: Socket Programming
- [ ] Episode 11: Packet Analysis
- [ ] Episode 12: Encrypted Communications

## 🔗 Навигация

- [← Season 2: Memory & Pointers](../season-2-memory-and-pointers/README.md)
- [→ Season 4: Crypto & Algorithms](../season-4-crypto-and-algorithms/README.md)
- [📋 Общий план курса](../CURRICULUM.md)
- [🏠 Главная страница](../README.md)

---

## ⚠️ Важные замечания

### Безопасность и легальность

**Все техники в этом сезоне предназначены ТОЛЬКО для:**
- Образовательных целей
- Тестирования собственных систем
- Авторизованного пентеста

**НИКОГДА не используйте:**
- На чужих сетях без разрешения
- Для незаконного перехвата трафика
- В нарушение законов о кибербезопасности

**Вы несёте полную ответственность** за использование полученных знаний.

### Системные требования

- **Root/sudo доступ** для raw sockets
- **Разрешение firewall** для серверных сокетов
- **Виртуальная сеть** для безопасного тестирования (рекомендуется)

### Рекомендуемая среда

Для практики создайте изолированную сеть:
```bash
# Вариант 1: Локальный loopback (127.0.0.1)
# Безопасно, но ограниченно

# Вариант 2: Docker network
docker network create moonlight-net

# Вариант 3: VirtualBox/VMware с NAT network
# Полный контроль, изолировано от основной сети
```

---

> *"In the network, everyone leaves traces. Learn to read them."* — V.
