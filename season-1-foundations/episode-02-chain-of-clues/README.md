# Episode 02: "Цепочка зацепок"
## Season 1: Foundations

> *"Данные говорят, но нужно научиться их слушать..."*

---

## 🎬 BRIEFING

```
╔════════════════════════════════════════════════════════════╗
║  ЛОКАЦИЯ: Ваша квартира, район Арбат, Москва              ║
║  ВРЕМЯ:   01:23, среда, 1 октября (глубокая ночь)         ║
║  СТАТУС:  🟡 DATA ANALYSIS IN PROGRESS                    ║
╚════════════════════════════════════════════════════════════╝
```

**01:15**  
Сообщение расшифровано. Вы смотрите на слова Виктора уже 10-й раз:

> *"MOONLIGHT activated. They know. Files at old place. Trust only code."*

Каждое слово — загадка. Но сейчас не время для философии.

**01:18**  
"Старое место" — вы внезапно вспоминаете. Это не физический адрес. Это **протокол скрытой передачи файлов**, который вы с Виктором разработали три года назад в подвале ФСБ. Dead drop в цифровом мире.

Протокол использует стеганографию, множественные прокси и шифрование слоями. Если кто-то обращается к "старому месту", значит всё серьёзно.

**01:20**  
Вы достаёте старый ноутбук из-под кровати. Пыль. Забытый код. Запускаете скрипт.

```bash
$ python old_protocol.py --retrieve
[***] Connecting through 7 proxies...
[***] Decrypting layers... 1/3... 2/3... 3/3...
[***] File found: data.dat (142 KB)
[***] Download complete.
```

**01:23**  
Открываете файл. Внутри — хаос:

```
C 55.7558 37.6173 1634567890
T 14 30 1634567891  
I 42 0 1634567892
C -33.8688 151.2093 1634567900
T 23 47 1634567905
...
```

Координаты. Временные метки. Идентификаторы. Сотни строк. Но без порядка.

> *"Данные не говорят сами. Их нужно заставить говорить."* — учил вас Виктор.

**Ваша задача:** Классифицировать данные. Найти смысл в хаосе. Понять, что пытается сказать Виктор.

---

## 📚 THEORY

> *"Код без условий — это дорога без развилок. Скучная и бесполезная."* — Victor Petrov

### 1. Условные операторы (if/else)

Программы должны **принимать решения** на основе условий, как детектив, анализирующий улики.

```c
int temperature = 25;

if (temperature > 30) {
    printf("Жарко!\n");
} else if (temperature > 20) {
    printf("Комфортно\n");
} else {
    printf("Холодно\n");
}
```

**Метафора — Детектив на перекрёстке:**

```
             [ПРОВЕРКА УСЛОВИЯ]
                    |
            if (clue > 30)
                    |
        ┌───────────┴───────────┐
        │                       │
     ДА (true)              НЕТ (false)
        │                       │
   "Жарко!"                else if...
   [действие 1]               или
                           "Холодно!"
                           [действие 2]
```

Как детектив на развилке: изучаешь улику → принимаешь решение → идёшь по нужному пути.

#### Операторы сравнения:
```c
a == b  // равно
a != b  // не равно
a > b   // больше
a < b   // меньше
a >= b  // больше или равно
a <= b  // меньше или равно
```

⚠️ **Смертельная ошибка новичка:**
```c
// НЕПРАВИЛЬНО — присваивание вместо сравнения!
if (x = 5) {  
    printf("Всегда выполнится!\n");  // БАГ! x = 5 всегда истина
}

// ПРАВИЛЬНО — сравнение
if (x == 5) {  
    printf("Выполнится только если x равен 5\n");
}
```

**Запомните:** `=` — присваивание (засунуть в коробку), `==` — сравнение (проверить содержимое)

---

### 2. Логические операторы

Комбинируйте условия:

```c
int age = 25;
int has_license = 1;  // 1 = true, 0 = false

// AND (&&) - оба условия должны быть истинны
if (age >= 18 && has_license) {
    printf("Можете водить\n");
}

// OR (||) - хотя бы одно условие истинно
if (age < 18 || !has_license) {
    printf("Нельзя водить\n");
}

// NOT (!) - инвертирует условие
if (!has_license) {
    printf("Нет прав\n");
}
```

**Таблицы истинности:**
```
AND (&&):           OR (||):          NOT (!):
0 && 0 = 0          0 || 0 = 0        !0 = 1
0 && 1 = 0          0 || 1 = 1        !1 = 0
1 && 0 = 0          1 || 0 = 1
1 && 1 = 1          1 || 1 = 1
```

---

### 3. Switch statement — диспетчер решений

Когда вариантов много, `switch` работает как диспетчер на вокзале:

```c
int day = 3;

switch (day) {
    case 1:
        printf("Понедельник\n");
        break;
    case 2:
        printf("Вторник\n");
        break;
    case 3:
        printf("Среда\n");
        break;
    // ...
    default:
        printf("Неизвестный день\n");
}
```

**Важно:** `break` обязателен! Иначе код провалится в следующий case.

**Метафора — Диспетчер на вокзале:**

```
        ПОЕЗД (переменная day)
               |
         [ДИСПЕТЧЕР]
               |
    ┌──────────┼──────────┐
    │          │          │
  case 1    case 2    case 3  ...  default
    │          │          │          │
   ПН         ВТ         СР      Неизвестно
```

Диспетчер смотрит на номер поезда (значение переменной) и направляет его на нужную платформу (блок кода).

---

### 4. Тернарный оператор

Краткая форма if/else для простых случаев:

```c
int age = 20;
char *status = (age >= 18) ? "adult" : "minor";

// Эквивалентно:
char *status;
if (age >= 18) {
    status = "adult";
} else {
    status = "minor";
}
```

**Синтаксис:** `условие ? значение_если_истина : значение_если_ложь`

---

### 5. Валидация данных

Всегда проверяйте входные данные!

```c
float latitude, longitude;
printf("Enter coordinates: ");
scanf("%f %f", &latitude, &longitude);

// Валидация
if (latitude < -90.0 || latitude > 90.0) {
    printf("Invalid latitude!\n");
    return 1;
}

if (longitude < -180.0 || longitude > 180.0) {
    printf("Invalid longitude!\n");
    return 1;
}

printf("Valid coordinates: %.2f, %.2f\n", latitude, longitude);
```

---

## 🎯 MISSION

```
╔═══════════════════════════════════════════════════════════╗
║           🎯 МИССИЯ: CHAIN OF CLUES                      ║
║                                                           ║
║  Классифицировать данные из файла Виктора                ║
║  Найти закономерности                                     ║
║  Определить следующий шаг                                 ║
╚═══════════════════════════════════════════════════════════╝
```

### 📂 Формат данных

Файл `data.dat` содержит записи в формате:
```
<type> <value1> <value2> <timestamp>
```

**Типы:**
- `C` - Coordinate (широта, долгота)
- `T` - Time (часы, минуты)
- `I` - ID (числовой идентификатор)

**Примеры:**
```
C 55.7558 37.6173 1234567890
T 14 30 1234567891
I 42 0 1234567892
C -33.8688 151.2093 1234567900
```

---

### Задача 1: classifier.c

**Цель:** Классификация записей по типам

Напишите программу, которая:
1. Читает записи
2. Определяет тип
3. Проверяет валидность данных
4. Выводит статистику

**Валидация:**
- Координаты: lat ∈ [-90, 90], lon ∈ [-180, 180]
- Время: hours ∈ [0, 23], minutes ∈ [0, 59]
- ID: любое положительное число

---

### Задача 2: router.c

**Цель:** Маршрутизация данных по категориям

На основе данных определить:
- Координаты в Москве (55.0-56.0 N, 36.0-38.0 E)
- Координаты в других странах
- Время: день (06:00-18:00) или ночь
- ID: чётные / нечётные

Вывести каждую запись в соответствующую категорию.

---

### Задача 3: pattern_finder.c (Preview для Episode 03)

**Цель:** Найти связь между записями

Найти:
- Сколько координат в одном городе
- Есть ли повторяющиеся временные метки
- Какие ID встречаются чаще всего

---

## 📝 Структура

```
episode-02-chain-of-clues/
├── README.md
├── mission.md
├── data.dat              ← Входные данные
├── starter.c
├── artifacts/
│   ├── classifier.c      ← Ваш код
│   ├── router.c
│   └── pattern_finder.c
└── tests/
    └── test.sh
```

---

## 🛠 Компиляция

```bash
gcc -Wall -Wextra -std=c11 -o classifier artifacts/classifier.c
./classifier < data.dat
```

---

## 💡 Подсказки

<details>
<summary>Hint 1: Чтение типа записи</summary>

```c
char type;
scanf(" %c", &type);  // Пробел перед %c игнорирует whitespace
```
</details>

<details>
<summary>Hint 2: Switch для типов</summary>

```c
switch (type) {
    case 'C':
        // Обработка координат
        break;
    case 'T':
        // Обработка времени
        break;
    // ...
}
```
</details>

---

## 🎓 Что вы изучите

✅ Условные операторы (`if`, `else`)  
✅ Switch statement  
✅ Логические операторы  
✅ Тернарный оператор  
✅ Валидация данных  
✅ Чтение структурированных данных  

---

## 🎬 DEBRIEFING

```
╔═══════════════════════════════════════════════════════════╗
║          📊 РЕЗУЛЬТАТЫ АНАЛИЗА ДАННЫХ                     ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  ✓ Классифицировано: 142 записи                          ║
║  ✓ Координаты: 48 точек (3 города)                       ║
║  ✓ Временные метки: Москва, Сидней, Берлин               ║
║  ✓ ID: 27 уникальных идентификаторов                     ║
║                                                           ║
║  [!] ОБНАРУЖЕНО:                                          ║
║      Координаты образуют ПАТТЕРН                          ║
║      Временные интервалы НЕ случайны                      ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

**02:47, среда**  
Вы откидываетесь на спинку кресла. Данные классифицированы. Статистика собрана.

Но главное открытие ждёт в следующем эпизоде...

**Обнаружено:**
- 🌍 Координаты формируют **географический паттерн**
- ⏱️ Временные метки появляются с **определённой периодичностью**
- 🔢 ID не случайны — они **указывают на что-то**

> *"Случайность — иллюзия. Паттерн — реальность. Нужно лишь научиться его видеть."*  
> — Из записной книжки Виктора

**Что дальше?**  
Классификация — только начало. Теперь нужно найти **закономерности** в этих данных. Для этого понадобятся циклы. Много циклов.

**Status:** 🟢 Mission Complete!  
**New Skill Unlocked:** 🎯 Conditional Logic  
**Next Episode:** Episode 03 - "Паттерны во времени"

---

### 📚 Что вы изучили:
- ✅ Условные операторы (if/else/switch)
- ✅ Логические операции (&&, ||, !)
- ✅ Валидацию данных
- ✅ Принятие решений в коде
- ✅ Классификацию по типам

*— Каждая улика ведёт к следующей. Нить расследования становится всё длиннее...*
